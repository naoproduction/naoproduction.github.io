<!DOCTYPE html>
<html>
<head>
	<title>Page admin</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
	<h1>Liste des projets</h1>
	<ul id="project-list"></ul>
	<h2>Ajouter un projet</h2>
	<form id="add-project-form">
		<label for="title-input">Titre :</label>
		<input type="text" id="title-input" required>
		<label for="url-input">URL de la vidéo :</label>
		<input type="url" id="url-input" required>
		<button type="submit">Ajouter</button>
	</form>
	<h2>Supprimer un projet</h2>
	<form id="delete-project-form">
		<label for="delete-input">Titre :</label>
		<select id="delete-input"></select>
		<button type="submit">Supprimer</button>
	</form>
	<script>
		// Chargement du fichier JSON
		$.getJSON("projects.json", function(data) {
			// Affichage des projets
			$.each(data.projects, function(index, project) {
				$("#project-list").append("<li>" + project.title + " - " + project.videoUrl + "</li>");
				$("#delete-input").append("<option value='" + index + "'>" + project.title + "</option>");
			});

			// Ajout d'un projet
			$("#add-project-form").submit(function(event) {
				event.preventDefault();
				var title = $("#title-input").val();
				var url = $("#url-input").val();
				data.projects.push({"title": title, "videoUrl": url});
				$.ajax({
					type: "POST",
					url: "projects.json",
					data: JSON.stringify(data),
					success: function() {
						alert("Le projet a été ajouté avec succès !");
						location.reload();
					},
					error: function() {
						alert("Une erreur est survenue.");
					}
				});
			});

			// Suppression d'un projet
			$("#delete-project-form").submit(function(event) {
				event.preventDefault();
				var index = $("#delete-input").val();
				data.projects.splice(index, 1);
				$.ajax({
					type: "POST",
					url: "projects.json",
					data: JSON.stringify(data),
					success: function() {
						alert("Le projet a été supprimé avec succès !");
						location.reload();
					},
					error: function() {
						alert("Une erreur est survenue.");
					}
				});
			});
		});
	</script>
</body>
</html>